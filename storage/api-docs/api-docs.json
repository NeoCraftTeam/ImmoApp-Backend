{
    "openapi": "3.0.0",
    "info": {
        "title": "KeyHome api",
        "description": "Documentation compl√®te de KeyHome api",
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "v1"
    },
    "paths": {
        "/api/v1/my/ads/analytics": {
            "get": {
                "tags": [
                    "üìä Analytics"
                ],
                "summary": "üìä Dashboard analytics ‚Äî Vue d'ensemble (toutes mes annonces)",
                "description": "Retourne les m√©triques agr√©g√©es de toutes les annonces du bailleur/agence :\n     *\n     *     - **Totaux** : impressions, vues, favoris, partages, contacts, appels, d√©blocages\n     *     - **Taux** : conversion (unlocks/views), engagement ((fav+shares+contacts)/impressions)\n     *     - **Tendances** : donn√©es quotidiennes par type de m√©trique\n     *     - **Top Ads** : les 5 annonces les plus performantes\n     *\n     *     Param√®tre `period` : `7d`, `30d`, `90d` (d√©faut : `30d`).",
                "operationId": "a9969044846f81d47edc5b3f2c2c9080",
                "parameters": [
                    {
                        "name": "period",
                        "in": "query",
                        "description": "P√©riode d'analyse : 7d, 30d, 90d",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "30d",
                            "enum": [
                                "7d",
                                "30d",
                                "90d"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Analytics overview",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "period": {
                                                    "type": "string",
                                                    "example": "30d"
                                                },
                                                "totals": {
                                                    "properties": {
                                                        "impressions": {
                                                            "type": "integer",
                                                            "example": 12450
                                                        },
                                                        "views": {
                                                            "type": "integer",
                                                            "example": 3200
                                                        },
                                                        "favorites": {
                                                            "type": "integer",
                                                            "example": 180
                                                        },
                                                        "shares": {
                                                            "type": "integer",
                                                            "example": 45
                                                        },
                                                        "contact_clicks": {
                                                            "type": "integer",
                                                            "example": 120
                                                        },
                                                        "phone_clicks": {
                                                            "type": "integer",
                                                            "example": 85
                                                        },
                                                        "unlocks": {
                                                            "type": "integer",
                                                            "example": 62
                                                        },
                                                        "conversion_rate": {
                                                            "type": "number",
                                                            "example": 1.94
                                                        },
                                                        "engagement_rate": {
                                                            "type": "number",
                                                            "example": 2.77
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "trends": {
                                                    "type": "object"
                                                },
                                                "top_ads": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/my/ads/{ad}/analytics": {
            "get": {
                "tags": [
                    "üìä Analytics"
                ],
                "summary": "üìä Analytics d√©taill√©es d'une annonce",
                "description": "Retourne les m√©triques d√©taill√©es d'une annonce sp√©cifique :\n     *\n     *     - **Totaux** : toutes les m√©triques d'interaction\n     *     - **Quotidien** : breakdown jour par jour\n     *     - **Entonnoir** : impressions ‚Üí views ‚Üí contacts ‚Üí unlocks\n     *     - **Audience** : viewers uniques, r√©currents, favorited_by\n     *\n     *     L'annonce doit appartenir √† l'utilisateur authentifi√©.",
                "operationId": "ce43460d16c9c620e7c20e505c67901a",
                "parameters": [
                    {
                        "name": "ad",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "period",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "30d",
                            "enum": [
                                "7d",
                                "30d",
                                "90d"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Ad analytics detail"
                    },
                    "403": {
                        "description": "L'annonce ne vous appartient pas"
                    },
                    "404": {
                        "description": "Annonce introuvable"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/ads": {
            "get": {
                "tags": [
                    "üè† Annonces"
                ],
                "summary": "Obtenir toutes les annonces",
                "description": "R√©cup√©rer une liste pagin√©e de toutes les annonces avec leurs relations (utilisateur, quartier, ville, type, images)",
                "operationId": "obtenirAnnonces",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Num√©ro de page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1,
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'√©l√©ments par page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15,
                            "maximum": 100,
                            "minimum": 1,
                            "example": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Op√©ration r√©ussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "description": "Liste des annonces",
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AdResource"
                                            }
                                        },
                                        "links": {
                                            "description": "Liens de pagination",
                                            "properties": {
                                                "first": {
                                                    "type": "string",
                                                    "example": "https://example.com/api/v1/ads?page=1"
                                                },
                                                "last": {
                                                    "type": "string",
                                                    "example": "https://example.com/api/v1/ads?page=10"
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "example": null,
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "example": "https://example.com/api/v1/ads?page=2",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "description": "M√©tadonn√©es de pagination",
                                            "properties": {
                                                "current_page": {
                                                    "description": "Page actuelle",
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "from": {
                                                    "description": "Premier √©l√©ment de la page",
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "description": "Derni√®re page",
                                                    "type": "integer",
                                                    "example": 10
                                                },
                                                "per_page": {
                                                    "description": "√âl√©ments par page",
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "to": {
                                                    "description": "Dernier √©l√©ment de la page",
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "total": {
                                                    "description": "Total des √©l√©ments",
                                                    "type": "integer",
                                                    "example": 150
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√© - Token d'authentification manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Token d'authentification requis"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Interdit - Permissions insuffisantes pour voir les annonces",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette action n'est pas autoris√©e"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Permissions insuffisantes"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "üè† Annonces"
                ],
                "summary": "Cr√©er une nouvelle annonce",
                "description": "Cr√©er une nouvelle annonce immobili√®re avec images et donn√©es de localisation. Les coordonn√©es GPS sont obligatoires.",
                "operationId": "creerAnnonce",
                "requestBody": {
                    "description": "Donn√©es de l'annonce avec images optionnelles",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "title",
                                    "description",
                                    "adresse",
                                    "price",
                                    "surface_area",
                                    "bedrooms",
                                    "bathrooms",
                                    "latitude",
                                    "longitude",
                                    "quarter_id",
                                    "type_id"
                                ],
                                "properties": {
                                    "title": {
                                        "description": "Titre accrocheur de l'annonce",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Magnifique appartement au centre-ville"
                                    },
                                    "description": {
                                        "description": "Description d√©taill√©e du bien",
                                        "type": "string",
                                        "example": "Spacieux appartement de 3 pi√®ces avec vue imprenable sur la ville, proche de tous commerces"
                                    },
                                    "adresse": {
                                        "description": "Adresse compl√®te du bien",
                                        "type": "string",
                                        "maxLength": 500,
                                        "example": "123 Rue de la R√©publique, Centre-ville"
                                    },
                                    "price": {
                                        "description": "Prix en euros",
                                        "type": "number",
                                        "format": "float",
                                        "minimum": 0,
                                        "example": 1200.5
                                    },
                                    "surface_area": {
                                        "description": "Surface habitable en m√®tres carr√©s",
                                        "type": "number",
                                        "format": "float",
                                        "minimum": 0,
                                        "example": 85.5
                                    },
                                    "bedrooms": {
                                        "description": "Nombre de chambres",
                                        "type": "integer",
                                        "minimum": 0,
                                        "example": 2
                                    },
                                    "bathrooms": {
                                        "description": "Nombre de salles de bain",
                                        "type": "integer",
                                        "minimum": 0,
                                        "example": 1
                                    },
                                    "has_parking": {
                                        "description": "Disponibilit√© d'une place de parking",
                                        "type": "boolean",
                                        "example": true
                                    },
                                    "latitude": {
                                        "description": "Latitude GPS (obligatoire)",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 90,
                                        "minimum": -90,
                                        "example": 48.8566
                                    },
                                    "longitude": {
                                        "description": "Longitude GPS (obligatoire)",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 180,
                                        "minimum": -180,
                                        "example": 2.3522
                                    },
                                    "status": {
                                        "description": "Statut de l'annonce (par d√©faut: pending)",
                                        "type": "string",
                                        "enum": [
                                            "pending",
                                            "active",
                                            "expired",
                                            "sold"
                                        ],
                                        "example": "pending"
                                    },
                                    "expires_at": {
                                        "description": "Date d'expiration de l'annonce",
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2024-12-31T23:59:59Z"
                                    },
                                    "quarter_id": {
                                        "description": "Identifiant du quartier",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "type_id": {
                                        "description": "Identifiant du type de bien",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "user_id": {
                                        "description": "Identifiant du propri√©taire (optionnel, par d√©faut l'utilisateur connect√©)",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "images": {
                                        "description": "Images du bien (maximum 10 images, 5MB chacune). Formats: JPEG, PNG, GIF, WebP. Note: Utiliser le nom de champ 'images[]' pour l'envoi multiple.",
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "binary"
                                        },
                                        "maxItems": 10
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Annonce cr√©√©e avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Annonce cr√©√©e avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "ad": {
                                                    "$ref": "#/components/schemas/AdResource"
                                                },
                                                "images_count": {
                                                    "description": "Nombre total d'images associ√©es",
                                                    "type": "integer",
                                                    "example": 3
                                                },
                                                "images_processed": {
                                                    "description": "Nombre d'images trait√©es avec succ√®s",
                                                    "type": "integer",
                                                    "example": 3
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Token d'authentification requis"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Interdit - Permissions insuffisantes pour cr√©er une annonce",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette action n'est pas autoris√©e"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Permissions insuffisantes pour cr√©er une annonce"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreurs de validation ou √©chec de cr√©ation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur lors de la cr√©ation de l'annonce"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Les coordonn√©es GPS sont obligatoires"
                                        },
                                        "errors": {
                                            "description": "Erreurs de validation d√©taill√©es",
                                            "type": "object",
                                            "example": {
                                                "title": [
                                                    "Le titre est obligatoire"
                                                ],
                                                "price": [
                                                    "Le prix doit √™tre sup√©rieur √† 0"
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/ads/{id}": {
            "get": {
                "tags": [
                    "üè† Annonces"
                ],
                "summary": "Obtenir une annonce sp√©cifique",
                "description": "R√©cup√©rer les informations d√©taill√©es d'une annonce sp√©cifique incluant ses images et relations (utilisateur, quartier, ville, type de bien)",
                "operationId": "obtenirAnnonce",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identifiant unique de l'annonce",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "1"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Annonce r√©cup√©r√©e avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/AdResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√© - Token d'authentification manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Token d'authentification requis"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Interdit - Permissions insuffisantes pour voir cette annonce",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette action n'est pas autoris√©e"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Vous n'avez pas l'autorisation de voir cette annonce"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Annonce introuvable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Annonce introuvable"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "L'annonce avec l'ID sp√©cifi√© n'existe pas"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "üè† Annonces"
                ],
                "summary": "Mettre √† jour une annonce existante",
                "description": "Mettre √† jour les informations d'une annonce, ajouter de nouvelles images ou supprimer des images existantes. Tous les champs sont optionnels sauf l'ID.",
                "operationId": "mettreAJourAnnonce",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identifiant unique de l'annonce √† mettre √† jour",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "1"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Donn√©es mises √† jour de l'annonce avec nouvelles images optionnelles",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "properties": {
                                    "_method": {
                                        "description": "Surcharge de m√©thode HTTP pour les uploads de fichiers",
                                        "type": "string",
                                        "example": "PUT"
                                    },
                                    "title": {
                                        "description": "Nouveau titre de l'annonce",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Titre d'annonce mis √† jour"
                                    },
                                    "description": {
                                        "description": "Nouvelle description d√©taill√©e",
                                        "type": "string",
                                        "example": "Description mise √† jour avec nouveaux √©quipements"
                                    },
                                    "adresse": {
                                        "description": "Nouvelle adresse du bien",
                                        "type": "string",
                                        "maxLength": 500,
                                        "example": "456 Avenue Mise √† Jour"
                                    },
                                    "price": {
                                        "description": "Nouveau prix en euros",
                                        "type": "number",
                                        "format": "float",
                                        "minimum": 0,
                                        "example": 1350.75
                                    },
                                    "surface_area": {
                                        "description": "Nouvelle surface en m¬≤",
                                        "type": "number",
                                        "format": "float",
                                        "minimum": 0,
                                        "example": 90
                                    },
                                    "bedrooms": {
                                        "description": "Nouveau nombre de chambres",
                                        "type": "integer",
                                        "minimum": 0,
                                        "example": 3
                                    },
                                    "bathrooms": {
                                        "description": "Nouveau nombre de salles de bain",
                                        "type": "integer",
                                        "minimum": 0,
                                        "example": 2
                                    },
                                    "has_parking": {
                                        "description": "Disponibilit√© parking mise √† jour",
                                        "type": "boolean",
                                        "example": false
                                    },
                                    "latitude": {
                                        "description": "Nouvelle latitude (optionnel - uniquement si localisation chang√©e)",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 90,
                                        "minimum": -90,
                                        "example": 48.8606
                                    },
                                    "longitude": {
                                        "description": "Nouvelle longitude (optionnel - uniquement si localisation chang√©e)",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 180,
                                        "minimum": -180,
                                        "example": 2.3376
                                    },
                                    "status": {
                                        "description": "Nouveau statut de l'annonce (optionnel)",
                                        "type": "string",
                                        "enum": [
                                            "pending",
                                            "active",
                                            "expired",
                                            "sold"
                                        ],
                                        "example": "active"
                                    },
                                    "expires_at": {
                                        "description": "Nouvelle date d'expiration (optionnel)",
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2025-01-31T23:59:59Z"
                                    },
                                    "quarter_id": {
                                        "description": "Nouvel identifiant de quartier",
                                        "type": "integer",
                                        "example": 2
                                    },
                                    "type_id": {
                                        "description": "Nouvel identifiant de type de bien",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "images": {
                                        "description": "Nouvelles images √† ajouter (max 10 total). Note: Utiliser le nom de champ 'images[]'.",
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "binary"
                                        }
                                    },
                                    "images_to_delete": {
                                        "description": "Identifiants des images √† supprimer",
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        },
                                        "example": [
                                            1,
                                            3,
                                            5
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Annonce mise √† jour avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Annonce mise √† jour avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "ad": {
                                                    "$ref": "#/components/schemas/AdResource"
                                                },
                                                "images_count": {
                                                    "description": "Nombre total d'images apr√®s mise √† jour",
                                                    "type": "integer",
                                                    "example": 4
                                                },
                                                "new_images_processed": {
                                                    "description": "Nombre de nouvelles images ajout√©es",
                                                    "type": "integer",
                                                    "example": 2
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√© - Token d'authentification manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Interdit - Permissions insuffisantes pour modifier cette annonce",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette action n'est pas autoris√©e"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Vous n'avez pas l'autorisation de modifier cette annonce"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Annonce introuvable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Annonce introuvable"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation errors or update failed",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error updating ad"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Validation failed or server error"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "üè† Annonces"
                ],
                "summary": "Supprimer une annonce",
                "description": "Supprimer d√©finitivement une annonce et toutes ses images associ√©es. Cette action est irr√©versible et supprimera √©galement tous les fichiers m√©dia stock√©s.",
                "operationId": "supprimerAnnonce",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identifiant unique de l'annonce √† supprimer",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "1"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Annonce supprim√©e avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "description": "Statut de succ√®s de l'op√©ration",
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "description": "Message de confirmation",
                                            "type": "string",
                                            "example": "Annonce supprim√©e avec succ√®s"
                                        },
                                        "data": {
                                            "description": "Informations d√©taill√©es sur la suppression effectu√©e",
                                            "properties": {
                                                "deleted_ad_id": {
                                                    "description": "ID de l'annonce supprim√©e",
                                                    "type": "string",
                                                    "example": "1"
                                                },
                                                "deleted_ad_title": {
                                                    "description": "Titre de l'annonce supprim√©e",
                                                    "type": "string",
                                                    "example": "Magnifique appartement centre-ville"
                                                },
                                                "deleted_images_count": {
                                                    "description": "Nombre total d'images supprim√©es",
                                                    "type": "integer",
                                                    "example": 5
                                                },
                                                "deleted_images_details": {
                                                    "description": "D√©tails des images supprim√©es",
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "description": "ID de l'image",
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "was_primary": {
                                                                "description": "Si l'image √©tait primaire",
                                                                "type": "boolean",
                                                                "example": true
                                                            },
                                                            "media_files_deleted": {
                                                                "description": "Nombre de fichiers m√©dia supprim√©s",
                                                                "type": "integer",
                                                                "example": 1
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "deletion_timestamp": {
                                                    "description": "Timestamp de la suppression",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-01-15T14:30:00.000Z"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√© - Token d'authentification manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Token d'authentification requis pour supprimer une annonce"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Interdit - Permissions insuffisantes pour supprimer cette annonce",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette action n'est pas autoris√©e"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Vous n'avez pas l'autorisation de supprimer cette annonce. Seul le propri√©taire ou un administrateur peut la supprimer."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Annonce introuvable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Annonce introuvable"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "L'annonce avec l'ID sp√©cifi√© n'existe pas ou a d√©j√† √©t√© supprim√©e"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur lors de la suppression",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur lors de la suppression de l'annonce"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Une erreur s'est produite lors de la suppression des fichiers ou de la base de donn√©es"
                                        },
                                        "debug_info": {
                                            "description": "Informations de debug (uniquement en mode debug)",
                                            "properties": {
                                                "file": {
                                                    "type": "string",
                                                    "example": "/path/to/file.php"
                                                },
                                                "line": {
                                                    "type": "integer",
                                                    "example": 123
                                                },
                                                "ad_id": {
                                                    "type": "string",
                                                    "example": "1"
                                                }
                                            },
                                            "type": "object",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/ads/nearby": {
            "get": {
                "tags": [
                    "üè† Annonces"
                ],
                "summary": "Recherche publique d'annonces √† proximit√© par coordonn√©es GPS",
                "description": "R√©cup√©rer toutes les annonces dans un rayon d√©fini autour de coordonn√©es GPS fournies. Cette route est accessible sans authentification. Les coordonn√©es GPS (latitude/longitude) sont obligatoires pour cette route.",
                "operationId": "obtenirAnnoncesProximitePublic",
                "parameters": [
                    {
                        "name": "latitude",
                        "in": "query",
                        "description": "Latitude du point central de recherche (obligatoire)",
                        "required": true,
                        "schema": {
                            "type": "number",
                            "format": "float",
                            "maximum": 90,
                            "minimum": -90,
                            "example": 48.8566
                        }
                    },
                    {
                        "name": "longitude",
                        "in": "query",
                        "description": "Longitude du point central de recherche (obligatoire)",
                        "required": true,
                        "schema": {
                            "type": "number",
                            "format": "float",
                            "maximum": 180,
                            "minimum": -180,
                            "example": 2.3522
                        }
                    },
                    {
                        "name": "radius",
                        "in": "query",
                        "description": "Rayon de recherche en m√®tres (par d√©faut: 1000m)",
                        "required": false,
                        "schema": {
                            "type": "number",
                            "format": "float",
                            "default": 1000,
                            "minimum": 0,
                            "example": 5000
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Annonces √† proximit√© r√©cup√©r√©es avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "description": "Liste des annonces √† proximit√© tri√©es par distance croissante",
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AdResource"
                                            }
                                        },
                                        "coordinates": {
                                            "description": "Coordonn√©es et distances de chaque annonce",
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "latitude": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 48.8606
                                                    },
                                                    "longitude": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 2.3376
                                                    },
                                                    "distance": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 523.45
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "center": {
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 48.8566
                                                        },
                                                        "longitude": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 2.3522
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "radius": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 5000
                                                },
                                                "count": {
                                                    "type": "integer",
                                                    "example": 12
                                                },
                                                "user_id": {
                                                    "type": "integer",
                                                    "example": null,
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Interdit - Permissions insuffisantes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette action n'est pas autoris√©e"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation - Coordonn√©es manquantes ou invalides",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Latitude and longitude are required and must be within valid ranges."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "An error occurred while fetching nearby ads."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ads/{user}/nearby": {
            "get": {
                "tags": [
                    "üè† Annonces"
                ],
                "summary": "Recherche d'annonces √† proximit√© d'un utilisateur sp√©cifique",
                "description": "R√©cup√©rer toutes les annonces dans un rayon d√©fini autour de la localisation enregistr√©e d'un utilisateur sp√©cifique. Cette route n√©cessite une authentification. Si l'utilisateur n'a pas de localisation enregistr√©e, vous pouvez fournir latitude/longitude en param√®tres de requ√™te pour override.",
                "operationId": "obtenirAnnoncesProximiteUtilisateur",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "Identifiant de l'utilisateur dont on utilise la localisation",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 2210
                        }
                    },
                    {
                        "name": "radius",
                        "in": "query",
                        "description": "Rayon de recherche en m√®tres (par d√©faut: 1000m)",
                        "required": false,
                        "schema": {
                            "type": "number",
                            "format": "float",
                            "default": 1000,
                            "minimum": 0,
                            "example": 1
                        }
                    },
                    {
                        "name": "latitude",
                        "in": "query",
                        "description": "Latitude optionnelle pour override la localisation de l'utilisateur",
                        "required": false,
                        "schema": {
                            "type": "number",
                            "format": "float",
                            "maximum": 90,
                            "minimum": -90,
                            "example": 48.8566
                        }
                    },
                    {
                        "name": "longitude",
                        "in": "query",
                        "description": "Longitude optionnelle pour override la localisation de l'utilisateur",
                        "required": false,
                        "schema": {
                            "type": "number",
                            "format": "float",
                            "maximum": 180,
                            "minimum": -180,
                            "example": 2.3522
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Annonces √† proximit√© de l'utilisateur r√©cup√©r√©es avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AdResource"
                                            }
                                        },
                                        "coordinates": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "latitude": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 48.8606
                                                    },
                                                    "longitude": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 2.3376
                                                    },
                                                    "distance": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 0.85
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "center": {
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 48.8566
                                                        },
                                                        "longitude": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 2.3522
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "radius": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 1
                                                },
                                                "count": {
                                                    "type": "integer",
                                                    "example": 3
                                                },
                                                "user_id": {
                                                    "type": "integer",
                                                    "example": 2210
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Non authentifi√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Interdit - Permissions insuffisantes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette action n'est pas autoris√©e"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur introuvable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "User not found."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Latitude and longitude are required and must be within valid ranges."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "An error occurred while fetching nearby ads."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/ads/autocomplete": {
            "get": {
                "tags": [
                    "üîç Filtre"
                ],
                "summary": "Autocompl√©tion (villes, types, quartiers)",
                "description": "Retourne jusqu'√† 10 suggestions commen√ßant par le pr√©fixe fourni pour les champs: ville (city), type de bien (type), quartier (quarter). Les r√©sultats incluent une cl√© 'value' (libell√©) et 'count' (nombre d'annonces disponibles).",
                "operationId": "autocompleteAnnonces",
                "parameters": [
                    {
                        "name": "field",
                        "in": "query",
                        "description": "Champ cibl√© pour l'autocompl√©tion",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "city",
                                "type",
                                "quarter"
                            ]
                        }
                    },
                    {
                        "name": "q",
                        "in": "query",
                        "description": "Pr√©fixe √† rechercher (insensible √† la casse). Si omis, retourne les 10 valeurs les plus fr√©quentes.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Pa"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste de suggestions pour l'autocompl√©tion",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "description": "Jusqu'√† 10 √©l√©ments tri√©s par 'count' d√©croissant",
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "value": {
                                                        "description": "Libell√© propos√© (ville / type / quartier)",
                                                        "type": "string",
                                                        "example": "Paris"
                                                    },
                                                    "count": {
                                                        "description": "Nombre d'annonces avec status 'available' associ√©es √† cette valeur",
                                                        "type": "integer",
                                                        "example": 42
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Param√®tre 'field' invalide ou non support√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid field. Allowed values: city, type, quarter."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur lors de la r√©cup√©ration des suggestions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error fetching autocomplete suggestions"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ads/facets": {
            "get": {
                "tags": [
                    "üîç Filtre"
                ],
                "summary": "Obtenir les facettes (compteurs de filtres)",
                "description": "Retourne les compteurs agr√©g√©s pour alimenter les filtres (villes, types, chambres, plages de prix/surface, parking). Endpoint public, sans authentification.",
                "operationId": "facettesAnnonces",
                "responses": {
                    "200": {
                        "description": "Facettes r√©cup√©r√©es avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "cities": {
                                                    "description": "Top 20 villes par nombre d'annonces disponibles",
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "name": {
                                                                "type": "string",
                                                                "example": "Paris"
                                                            },
                                                            "count": {
                                                                "type": "integer",
                                                                "example": 128
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "types": {
                                                    "description": "Top 20 types de bien",
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "name": {
                                                                "type": "string",
                                                                "example": "Appartement"
                                                            },
                                                            "count": {
                                                                "type": "integer",
                                                                "example": 312
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "bedrooms": {
                                                    "description": "R√©partition par nombre de chambres (tri croissant)",
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "value": {
                                                                "type": "integer",
                                                                "example": 2
                                                            },
                                                            "count": {
                                                                "type": "integer",
                                                                "example": 105
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "price_range": {
                                                    "description": "Plage de prix (valeurs d√©cimales en cha√Æne)",
                                                    "properties": {
                                                        "min": {
                                                            "type": "string",
                                                            "example": "25000.00"
                                                        },
                                                        "max": {
                                                            "type": "string",
                                                            "example": "150000.00"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "surface_range": {
                                                    "description": "Plage de surface (valeurs d√©cimales en cha√Æne)",
                                                    "properties": {
                                                        "min": {
                                                            "type": "string",
                                                            "example": "31.00"
                                                        },
                                                        "max": {
                                                            "type": "string",
                                                            "example": "120.00"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "has_parking": {
                                                    "description": "R√©partition des annonces avec/sans parking",
                                                    "properties": {
                                                        "with_parking": {
                                                            "type": "integer",
                                                            "example": 511
                                                        },
                                                        "without_parking": {
                                                            "type": "integer",
                                                            "example": 489
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur lors de la r√©cup√©ration des facettes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error fetching facets"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ads/search": {
            "get": {
                "tags": [
                    "üîç Filtre"
                ],
                "summary": "Rechercher des annonces",
                "description": "Rechercher des annonces avec filtres multiples : texte, ville, type, chambres, prix, surface, parking",
                "operationId": "rechercherAnnonces",
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "description": "Terme de recherche textuel",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "appartement lumineux"
                        }
                    },
                    {
                        "name": "city",
                        "in": "query",
                        "description": "Filtrer par ville",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Paris"
                        }
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "description": "Champ de tri",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "price",
                                "surface_area",
                                "created_at"
                            ],
                            "example": "price"
                        }
                    },
                    {
                        "name": "order",
                        "in": "query",
                        "description": "Ordre de tri",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "asc"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'√©l√©ments par page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "R√©sultats de recherche",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AdResource"
                                            }
                                        },
                                        "meta": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ads/{ad}/view": {
            "post": {
                "tags": [
                    "üìä Interactions"
                ],
                "summary": "Track an ad view",
                "description": "Track an ad view.\n\nDebounced: only 1 view per user per ad every 5 minutes.",
                "operationId": "bff00bc8f4b5fbd4fbce0d50570c2fea",
                "parameters": [
                    {
                        "name": "ad",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "View tracked"
                    },
                    "429": {
                        "description": "View already tracked recently"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/ads/{ad}/impression": {
            "post": {
                "tags": [
                    "üìä Interactions"
                ],
                "summary": "Track an ad impression",
                "description": "Track an ad impression (appeared in feed/list).\n\nDebounced: 1 impression per user per ad every 30 seconds.",
                "operationId": "9936ad951cf9c7ce695c1d68451027cb",
                "parameters": [
                    {
                        "name": "ad",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Impression tracked"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/ads/{ad}/share": {
            "post": {
                "tags": [
                    "üìä Interactions"
                ],
                "summary": "Track an ad share",
                "description": "Track an ad share.",
                "operationId": "24a21086feeb150db1ac35ccf2edcab6",
                "parameters": [
                    {
                        "name": "ad",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Share tracked"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/ads/{ad}/contact-click": {
            "post": {
                "tags": [
                    "üìä Interactions"
                ],
                "summary": "Track a contact button click",
                "description": "Track a contact button click.\n\nDebounced: 1 per user per ad per minute.",
                "operationId": "7a5603d4b819664fbc7e6eff036cc999",
                "parameters": [
                    {
                        "name": "ad",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Contact click tracked"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/ads/{ad}/phone-click": {
            "post": {
                "tags": [
                    "üìä Interactions"
                ],
                "summary": "Track a phone number click",
                "description": "Track a phone number click.\n\nDebounced: 1 per user per ad per minute.",
                "operationId": "c6ea471c5d293fae52c63132a6ddc2b8",
                "parameters": [
                    {
                        "name": "ad",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Phone click tracked"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/ads/{ad}/favorite": {
            "post": {
                "tags": [
                    "üìä Interactions"
                ],
                "summary": "Toggle favorite on an ad",
                "description": "Toggle favorite on an ad.\n\nUses a simple check: count of favorites minus unfavorites.\nEven count = not favorited, odd count = favorited.",
                "operationId": "3df3c30c7adeefb9b17b5b227d924bf8",
                "parameters": [
                    {
                        "name": "ad",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Favorite toggled",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "is_favorited": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/my/favorites": {
            "get": {
                "tags": [
                    "üìä Interactions"
                ],
                "summary": "List my favorite ads",
                "description": "List the authenticated user's favorite ads.\n\nAn ad is favorited if the number of favorite interactions\nexceeds the number of unfavorite interactions for that ad.",
                "operationId": "fc38fa60e0ddf2437c9a1dd03943bc1c",
                "responses": {
                    "200": {
                        "description": "List of favorite ads",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AdResource"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/ad-types": {
            "get": {
                "tags": [
                    "üè∑Ô∏è Type d'annonce"
                ],
                "summary": "Types d'annonces",
                "description": "R√©cup√®re la liste des types d'annonces",
                "operationId": "showAdTypes",
                "responses": {
                    "200": {
                        "description": "Succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/AdType"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autoris√©"
                    },
                    "404": {
                        "description": "Non trouv√©"
                    },
                    "500": {
                        "description": "Erreur du Serveur"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "üè∑Ô∏è Type d'annonce"
                ],
                "summary": "Creer un type d'annonce",
                "operationId": "storeAdType",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Chambre"
                                    },
                                    "desc": {
                                        "type": "string",
                                        "example": "C'est une chambre"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Cr√©e avec succ√®s"
                    },
                    "400": {
                        "description": "Requ√™te invalide"
                    },
                    "401": {
                        "description": "Non autoris√©"
                    },
                    "500": {
                        "description": "Erreur du Serveur"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/ad-types/{id}": {
            "get": {
                "tags": [
                    "üè∑Ô∏è Type d'annonce"
                ],
                "summary": "Afficher un type d'annonce",
                "operationId": "showAdType",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AdType"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Type non trouv√©"
                    },
                    "401": {
                        "description": "Non autoris√©"
                    },
                    "500": {
                        "description": "Erreur du Serveur"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "üè∑Ô∏è Type d'annonce"
                ],
                "summary": "Mettre √† jour du type d'annonce",
                "operationId": "updateAdType",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Chambre"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Mise √† jour avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AdType"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Requ√™te invalide"
                    },
                    "404": {
                        "description": "Type non trouv√©e"
                    },
                    "401": {
                        "description": "Non autoris√©"
                    },
                    "500": {
                        "description": "Erreur du Serveur"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "üè∑Ô∏è Type d'annonce"
                ],
                "summary": "Supprimer un type",
                "description": "Supprime le type par son ID",
                "operationId": "deleteAdType",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Supprim√©e avec succ√®s"
                    },
                    "404": {
                        "description": "Ville non trouv√©e"
                    },
                    "401": {
                        "description": "Non autoris√©"
                    },
                    "500": {
                        "description": "Erreur du Serveur"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/agencies": {
            "get": {
                "tags": [
                    "üè¢ Agence"
                ],
                "summary": "Liste des agences",
                "description": "R√©cup√®re la liste pagin√©e des agences",
                "operationId": "listAgencies",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Num√©ro de page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Agency"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autoris√©"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "üè¢ Agence"
                ],
                "summary": "Cr√©er une agence",
                "description": "Cr√©e une nouvelle agence",
                "operationId": "storeAgency",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Mon Agence Immo"
                                    },
                                    "logo": {
                                        "description": "Logo de l'agence",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Agence cr√©√©e",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Agency"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation"
                    },
                    "401": {
                        "description": "Non autoris√©"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/agencies/{id}": {
            "get": {
                "tags": [
                    "üè¢ Agence"
                ],
                "summary": "Afficher une agence",
                "description": "D√©tails d'une agence sp√©cifique",
                "operationId": "showAgency",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Agency"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Agence non trouv√©e"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "üè¢ Agence"
                ],
                "summary": "Mettre √† jour une agence",
                "operationId": "updateAgency",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Agence mise √† jour",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Agency"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Agence non trouv√©e"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "üè¢ Agence"
                ],
                "summary": "Supprimer une agence",
                "operationId": "deleteAgency",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Agence supprim√©e"
                    },
                    "404": {
                        "description": "Agence non trouv√©e"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/auth/registerCustomer": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Inscription d'un nouveau client",
                "description": "Permet l'inscription d'un nouvel utilisateur avec validation des donn√©es, gestion d'avatar optionnel et localisation GPS optionnelle",
                "operationId": "registerCustomer",
                "requestBody": {
                    "description": "Donn√©es d'inscription de l'utilisateur",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "firstname",
                                    "lastname",
                                    "email",
                                    "phone_number",
                                    "password",
                                    "confirm_password",
                                    "city_id"
                                ],
                                "properties": {
                                    "firstname": {
                                        "description": "Pr√©nom de l'utilisateur",
                                        "type": "string",
                                        "maxLength": 50,
                                        "example": "Jean"
                                    },
                                    "lastname": {
                                        "description": "Nom de famille de l'utilisateur",
                                        "type": "string",
                                        "maxLength": 50,
                                        "example": "Dupont"
                                    },
                                    "email": {
                                        "description": "Adresse email unique de l'utilisateur",
                                        "type": "string",
                                        "format": "email",
                                        "example": "jean.dupont@example.com"
                                    },
                                    "phone_number": {
                                        "description": "Num√©ro de t√©l√©phone avec indicatif pays",
                                        "type": "string",
                                        "example": "+33123456789"
                                    },
                                    "password": {
                                        "description": "Mot de passe (minimum 8 caract√®res)",
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "Motdepasse123%"
                                    },
                                    "confirm_password": {
                                        "description": "Confirmation du mot de passe (doit correspondre au password)",
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "Motdepasse123%"
                                    },
                                    "role": {
                                        "description": "R√¥le de l'utilisateur (automatiquement d√©fini √† 'customer')",
                                        "type": "string",
                                        "default": "customer",
                                        "enum": [
                                            "customer"
                                        ]
                                    },
                                    "city_id": {
                                        "description": "ID de la ville de r√©sidence de l'utilisateur",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "latitude": {
                                        "description": "Latitude GPS de la position de l'utilisateur (optionnel, doit √™tre fournie avec longitude)",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 90,
                                        "minimum": -90,
                                        "example": 48.8566,
                                        "nullable": true
                                    },
                                    "longitude": {
                                        "description": "Longitude GPS de la position de l'utilisateur (optionnel, doit √™tre fournie avec latitude)",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 180,
                                        "minimum": -180,
                                        "example": 2.3522,
                                        "nullable": true
                                    },
                                    "avatar": {
                                        "description": "Image d'avatar (optionnel, formats accept√©s: JPEG, PNG, GIF, WebP, max 2MB)",
                                        "type": "string",
                                        "format": "binary",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Inscription r√©ussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Inscription r√©ussie."
                                        },
                                        "access_token": {
                                            "description": "Token d'authentification Bearer",
                                            "type": "string",
                                            "example": "1|abc123def456..."
                                        },
                                        "email_verification_required": {
                                            "description": "Indique si la v√©rification email est requise",
                                            "type": "boolean",
                                            "example": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflit - Email d√©j√† utilis√© par un autre compte",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette adresse email est d√©j√† utilis√©e."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "413": {
                        "description": "Fichier avatar trop volumineux",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Le fichier avatar est trop volumineux."
                                        },
                                        "max_size": {
                                            "type": "string",
                                            "example": "2MB"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation des donn√©es fournies",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur de validation."
                                        },
                                        "errors": {
                                            "description": "D√©tails des erreurs de validation par champ",
                                            "type": "object",
                                            "example": {
                                                "email": [
                                                    "Le champ email doit √™tre une adresse email valide."
                                                ],
                                                "latitude": [
                                                    "The latitude must be between -90 and 90."
                                                ],
                                                "longitude": [
                                                    "The longitude field is required when latitude is present."
                                                ],
                                                "confirm_password": [
                                                    "The confirm password and password must match."
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Limitation de d√©bit - Trop de tentatives d'inscription",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Trop de tentatives d'inscription. R√©essayez dans 300 secondes."
                                        },
                                        "retry_after": {
                                            "description": "Nombre de secondes √† attendre avant de r√©essayer",
                                            "type": "integer",
                                            "example": 300
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne du serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Une erreur est survenue lors de l'inscription. Veuillez r√©essayer."
                                        },
                                        "error": {
                                            "description": "D√©tails de l'erreur (uniquement en mode debug)",
                                            "type": "string",
                                            "example": "Database connection failed",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/registerAgent": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Inscription d'un nouvel agent",
                "description": "Permet l'inscription d'un nouvel utilisateur avec validation des donn√©es et gestion d'avatar optionnel",
                "operationId": "registerAgent",
                "requestBody": {
                    "description": "Donn√©es d'inscription de l'utilisateur",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "firstname",
                                    "lastname",
                                    "email",
                                    "phone_number",
                                    "password"
                                ],
                                "properties": {
                                    "firstname": {
                                        "description": "Pr√©nom de l'utilisateur",
                                        "type": "string",
                                        "maxLength": 50,
                                        "example": "Jean"
                                    },
                                    "lastname": {
                                        "description": "Nom de famille de l'utilisateur",
                                        "type": "string",
                                        "maxLength": 50,
                                        "example": "Dupont"
                                    },
                                    "email": {
                                        "description": "Adresse email unique de l'utilisateur",
                                        "type": "string",
                                        "format": "email",
                                        "example": "jean.dupont@example.com"
                                    },
                                    "phone_number": {
                                        "description": "Num√©ro de t√©l√©phone de l'utilisateur",
                                        "type": "string",
                                        "example": "+33123456789"
                                    },
                                    "password": {
                                        "description": "Mot de passe (minimum 8 caract√®res)",
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "Motdepasse123%"
                                    },
                                    "confirm_password": {
                                        "description": "Mot de passe de confirmation (minimum 8 caract√®res)",
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "Motdepasse123%"
                                    },
                                    "role": {
                                        "description": "R√¥le de l'utilisateur",
                                        "type": "string",
                                        "default": "agent",
                                        "enum": [
                                            "agent"
                                        ],
                                        "example": "user"
                                    },
                                    "type": {
                                        "description": "Type d'utilisateur (agence ou individuel)",
                                        "type": "string",
                                        "enum": [
                                            "agency",
                                            "individual"
                                        ],
                                        "example": "premium",
                                        "nullable": false
                                    },
                                    "city_id": {
                                        "description": "ID de la ville de r√©sidence",
                                        "type": "integer",
                                        "example": 1,
                                        "nullable": false
                                    },
                                    "avatar": {
                                        "description": "Image d'avatar (optionnel, max 2MB)",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Inscription r√©ussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Inscription r√©ussie."
                                        },
                                        "access_token": {
                                            "type": "string",
                                            "example": "1|abc123def456..."
                                        },
                                        "email_verification_required": {
                                            "type": "boolean",
                                            "example": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Email d√©j√† utilis√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette adresse email est d√©j√† utilis√©e."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "413": {
                        "description": "Fichier avatar trop volumineux",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Le fichier avatar est trop volumineux."
                                        },
                                        "max_size": {
                                            "type": "string",
                                            "example": "2MB"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur de validation."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "example": {
                                                "email": [
                                                    "Le champ email doit √™tre une adresse email valide."
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Trop de tentatives d'inscription",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Trop de tentatives d'inscription. R√©essayez dans 300 secondes."
                                        },
                                        "retry_after": {
                                            "type": "integer",
                                            "example": 300
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Une erreur est survenue lors de l'inscription. Veuillez r√©essayer."
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Database connection failed"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/verifyEmail": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "V√©rification de l'adresse email",
                "description": "V√©rifie l'adresse email de l'utilisateur via un lien de v√©rification",
                "operationId": "verifyEmail",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "id",
                                    "hash"
                                ],
                                "properties": {
                                    "id": {
                                        "description": "ID de l'utilisateur",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "hash": {
                                        "description": "Hash de v√©rification",
                                        "type": "string",
                                        "example": "abc123def456"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Email v√©rifi√© avec succ√®s ou d√©j√† v√©rifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Email v√©rifi√© avec succ√®s."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Lien de v√©rification invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Lien de v√©rification invalide."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\User]"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/resendVerificationEmail": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Renvoyer l'email de v√©rification",
                "description": "Renvoie un email de v√©rification √† l'utilisateur",
                "operationId": "resendVerificationEmail",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "Adresse email de l'utilisateur",
                                        "type": "string",
                                        "format": "email",
                                        "example": "jean.dupont@example.com"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Email de v√©rification renvoy√© ou d√©j√† v√©rifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Email de v√©rification renvoy√©."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Utilisateur non trouv√©."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Trop de demandes de renvoi",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Trop de demandes. R√©essayez dans 300 secondes."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/login": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Connexion utilisateur",
                "description": "Authentifie un utilisateur et retourne un token d'acc√®s",
                "operationId": "login",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "Adresse email de l'utilisateur",
                                        "type": "string",
                                        "format": "email",
                                        "example": "jean.dupont@example.com"
                                    },
                                    "password": {
                                        "description": "Mot de passe de l'utilisateur",
                                        "type": "string",
                                        "format": "password",
                                        "example": "motdepasse123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Connexion r√©ussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Connexion r√©ussie."
                                        },
                                        "access_token": {
                                            "type": "string",
                                            "example": "1|abc123def456..."
                                        },
                                        "token_type": {
                                            "type": "string",
                                            "example": "Bearer"
                                        },
                                        "expires_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Identifiants invalides",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Identifiants invalides."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Compte d√©sactiv√© ou email non v√©rifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Compte d√©sactiv√©. Contactez l'administrateur."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Donn√©es de validation invalides."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "example": {
                                                "email": [
                                                    "Le champ email doit √™tre une adresse email valide."
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Trop de tentatives de connexion",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Trop de tentatives de connexion. R√©essayez dans 300 secondes."
                                        },
                                        "retry_after": {
                                            "type": "integer",
                                            "example": 300
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Une erreur est survenue lors de la connexion."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/logout": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "D√©connexion utilisateur",
                "description": "D√©connecte l'utilisateur en r√©voquant son token d'acc√®s",
                "operationId": "logout",
                "parameters": [
                    {
                        "name": "Authorization",
                        "in": "header",
                        "description": "Bearer token actuel √† rafra√Æchir",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "Bearer 1|abc123def456ghi789jkl012mno345pqr678stu901vwx234yz"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "D√©connexion r√©ussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "D√©connexion r√©ussie."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Token d'authentification manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur lors de la d√©connexion."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/me": {
            "get": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Informations de l'utilisateur connect√©",
                "description": "Retourne les informations de l'utilisateur actuellement authentifi√©",
                "operationId": "me",
                "parameters": [
                    {
                        "name": "Authorization",
                        "in": "header",
                        "description": "Bearer token pour l'authentification",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "Bearer 1|abc123def456ghi789jkl012mno345pqr678stu901vwx234yz"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Informations utilisateur r√©cup√©r√©es avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "authenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Token d'authentification manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/refresh": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Rafra√Æchir le token d'acc√®s",
                "description": "G√©n√®re un nouveau token d'acc√®s et r√©voque l'ancien",
                "operationId": "refresh",
                "parameters": [
                    {
                        "name": "Authorization",
                        "in": "header",
                        "description": "Bearer token actuel √† rafra√Æchir",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "Bearer 1|abc123def456ghi789jkl012mno345pqr678stu901vwx234yz"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token rafra√Æchi avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "access_token": {
                                            "type": "string",
                                            "example": "2|def789ghi012..."
                                        },
                                        "token_type": {
                                            "type": "string",
                                            "example": "Bearer"
                                        },
                                        "expires_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Token d'authentification manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur lors du rafra√Æchissement du token."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/forgot-password": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Mot de passe oubli√©",
                "description": "Envoie un lien de r√©initialisation de mot de passe par email",
                "operationId": "forgotPassword",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "user@example.com"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Lien envoy√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Nous vous avons envoy√© par email le lien de r√©initialisation du mot de passe !"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Impossible de trouver un utilisateur avec cette adresse email."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/reset-password": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "R√©initialiser le mot de passe",
                "description": "D√©finit un nouveau mot de passe en utilisant le token re√ßu par email",
                "operationId": "resetPassword",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "token",
                                    "email",
                                    "password",
                                    "password_confirmation"
                                ],
                                "properties": {
                                    "token": {
                                        "description": "Le token re√ßu dans l'email",
                                        "type": "string"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "user@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "NewPassword123!"
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "NewPassword123!"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Mot de passe r√©initialis√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Votre mot de passe a √©t√© r√©initialis√© !"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur (token invalide, email incorrect...)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Ce jeton de r√©initialisation de mot de passe est invalide."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/update-password": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Mettre √† jour le mot de passe (connect√©)",
                "description": "Permet √† un utilisateur connect√© de changer son mot de passe actuel",
                "operationId": "updatePassword",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "current_password",
                                    "new_password",
                                    "new_password_confirmation"
                                ],
                                "properties": {
                                    "current_password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "OldPass123!"
                                    },
                                    "new_password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "NewPass456!"
                                    },
                                    "new_password_confirmation": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "NewPass456!"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Mot de passe mis √† jour",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Mot de passe mis √† jour avec succ√®s."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation (ancien mot de passe incorrect...)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Le mot de passe actuel est incorrect."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/cities": {
            "get": {
                "tags": [
                    "üèôÔ∏è Ville"
                ],
                "summary": "Liste des villes",
                "description": "R√©cup√®re la liste pagin√©e des villes",
                "operationId": "showCities",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Num√©ro de page",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/City"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autoris√©"
                    },
                    "404": {
                        "description": "Non trouv√©"
                    },
                    "500": {
                        "description": "Erreur du Serveur"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "üèôÔ∏è Ville"
                ],
                "summary": "Cr√©er une ville",
                "description": "Cr√©e une nouvelle ville",
                "operationId": "storeCity",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Paris"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Ville cr√©√©e avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/City"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Requ√™te invalide"
                    },
                    "401": {
                        "description": "Non autoris√©"
                    },
                    "500": {
                        "description": "Erreur du Serveur"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/cities/{id}": {
            "get": {
                "tags": [
                    "üèôÔ∏è Ville"
                ],
                "summary": "Afficher une ville",
                "description": "R√©cup√®re les d√©tails d'une ville",
                "operationId": "showCity",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/City"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Ville non trouv√©"
                    },
                    "401": {
                        "description": "Non autoris√©"
                    },
                    "500": {
                        "description": "Erreur du Serveur"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "üèôÔ∏è Ville"
                ],
                "summary": "Mettre √† jour une ville",
                "description": "Met √† jour les d√©tails d'une ville",
                "operationId": "updateCity",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Lyon"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Ville mise √† jour avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/City"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Requ√™te invalide"
                    },
                    "404": {
                        "description": "Ville non trouv√©e"
                    },
                    "401": {
                        "description": "Non autoris√©"
                    },
                    "500": {
                        "description": "Erreur du Serveur"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "üèôÔ∏è Ville"
                ],
                "summary": "Supprimer une ville",
                "description": "Supprime une ville par son ID",
                "operationId": "deleteCity",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Ville supprim√©e avec succ√®s"
                    },
                    "404": {
                        "description": "Ville non trouv√©e"
                    },
                    "401": {
                        "description": "Non autoris√©"
                    },
                    "500": {
                        "description": "Erreur du Serveur"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/payments/initialize/{ad}": {
            "post": {
                "tags": [
                    "üí∞ Paiements"
                ],
                "summary": "1. Initialiser une demande de paiement",
                "description": "G√©n√®re un lien de paiement s√©curis√© via FedaPay. Le frontend doit rediriger l'utilisateur vers 'payment_url'.",
                "operationId": "2668ecddf3c0a8a298c0f5a00e1ed8b2",
                "parameters": [
                    {
                        "name": "ad",
                        "in": "path",
                        "description": "UUID de l'annonce √† d√©bloquer",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Succ√®s : Lien g√©n√©r√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "payment_url": {
                                            "description": "URL vers l'interface FedaPay",
                                            "type": "string"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Redirigez l'utilisateur vers cette URL pour payer."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©"
                    },
                    "404": {
                        "description": "L'annonce demand√©e n'existe pas"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/payments/webhook": {
            "post": {
                "tags": [
                    "üí∞ Paiements"
                ],
                "summary": "2. Webhook de validation (Usage interne FedaPay)",
                "description": "Cet endpoint est appel√© automatiquement par FedaPay d√®s qu'une transaction change de statut. Ne pas appeler manuellement par le frontend.",
                "operationId": "4ce4817727fef48fb4e50d0d0555595d",
                "requestBody": {
                    "description": "Payload envoy√© par FedaPay",
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "event": {
                                        "type": "string",
                                        "example": "transaction.approved"
                                    },
                                    "entity": {
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Webhook trait√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "ok"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/payments/callback": {
            "get": {
                "tags": [
                    "üí∞ Paiements"
                ],
                "summary": "3. Retour utilisateur apr√®s paiement",
                "description": "Page vers laquelle l'utilisateur est redirig√© apr√®s avoir quitt√© l'interface de paiement. Le frontend peut intercepter cette URL pour fermer la WebView.",
                "operationId": "8fd83614f4eaa636fde8efd984a3c0c9",
                "parameters": [
                    {
                        "name": "ad_id",
                        "in": "query",
                        "description": "ID de l'annonce d'origine",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "status": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/quarters": {
            "get": {
                "tags": [
                    "üìç Quartier"
                ],
                "summary": "Liste des quartiers",
                "description": "R√©cup√®re la liste pagin√©e de tous les quartiers",
                "operationId": "6e6abbea051bdd277da3457998416f0f",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Num√©ro de page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'√©l√©ments par page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 10,
                            "maximum": 100,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des quartiers r√©cup√©r√©e avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Quarter"
                                            }
                                        },
                                        "links": {
                                            "properties": {
                                                "first": {
                                                    "type": "string"
                                                },
                                                "last": {
                                                    "type": "string"
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "from": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "to": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autoris√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acc√®s interdit",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette action n'est pas autoris√©e."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "üìç Quartier"
                ],
                "summary": "Cr√©er un quartier",
                "description": "Cr√©e un nouveau quartier dans une ville",
                "operationId": "182c837b4798f9c7f7c234da6d44bc87",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "city_id"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nom du quartier",
                                        "type": "string",
                                        "example": "Centre-ville"
                                    },
                                    "city_id": {
                                        "description": "ID de la ville parente",
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Quartier cr√©√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Creation r√©ussie"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/Quarter"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflit - Le quartier existe d√©j√†",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette ce quartier existe d√©j√†."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "name": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le champ nom est obligatoire."
                                                    }
                                                },
                                                "city_id": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "Le champ city_id est obligatoire."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne du serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur de creation"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Database connection failed"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/quarters/{id}": {
            "get": {
                "tags": [
                    "üìç Quartier"
                ],
                "summary": "Afficher un quartier",
                "description": "R√©cup√®re les d√©tails d'un quartier sp√©cifique",
                "operationId": "f3159a4d73b23455efa28a31e28af933",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du quartier",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "D√©tails du quartier",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Quarter"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Quartier non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Ce quartier n'existe pas"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autoris√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acc√®s interdit",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette action n'est pas autoris√©e."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/quarters/{quarter}": {
            "put": {
                "tags": [
                    "üìç Quartier"
                ],
                "summary": "Mettre √† jour un quartier",
                "description": "Met √† jour les informations d'un quartier existant",
                "operationId": "b5052bd5fdfdb91d070fd47e84bfbf52",
                "parameters": [
                    {
                        "name": "quarter",
                        "in": "path",
                        "description": "ID du quartier √† mettre √† jour",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "description": "Nom du quartier",
                                        "type": "string",
                                        "example": "Centre-ville Nord"
                                    },
                                    "city_id": {
                                        "description": "ID de la ville parente",
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Quartier mis √† jour avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Mis √† jour avec succ√®s."
                                        },
                                        "quarter": {
                                            "$ref": "#/components/schemas/Quarter"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflit - Le nom est d√©j√† utilis√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Ce nom de quartier est d√©j√† utilis√©."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Quartier non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\Quarter]"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne du serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur de mise √† jour"
                                        },
                                        "error": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "üìç Quartier"
                ],
                "summary": "Supprimer un quartier",
                "description": "Supprime d√©finitivement un quartier",
                "operationId": "7c3f17e280c55d050b58490fcc05c506",
                "parameters": [
                    {
                        "name": "quarter",
                        "in": "path",
                        "description": "ID du quartier √† supprimer",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Quartier supprim√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Quartier supprim√© avec succ√®s."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Quartier non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\Quarter]"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autoris√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acc√®s interdit",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette action n'est pas autoris√©e."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne du serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur de suppression"
                                        },
                                        "error": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/recommendations": {
            "get": {
                "tags": [
                    "‚≠ê Recommandations"
                ],
                "summary": "Recommandations personnalis√©es (scoring pond√©r√© v2)",
                "description": "Retourne une liste d'annonces recommand√©es bas√©e sur un algorithme de scoring pond√©r√©.\n     *\n     *     Signaux utilis√©s : vues, favoris, d√©blocages (paiements).\n     *     Pond√©ration : type (40%) + ville (25%) + budget (20%) + fra√Æcheur (10%) + popularit√© (5%).\n     *     Diversit√© : 20% d'annonces exploratoires hors profil.\n     *     Cold Start : trending + boosted + latest.",
                "operationId": "9e1d04bb0918eedb7d013e17e448a5a0",
                "responses": {
                    "200": {
                        "description": "Liste des annonces recommand√©es",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AdResource"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "source": {
                                                    "type": "string",
                                                    "example": "personalized"
                                                },
                                                "algorithm": {
                                                    "type": "string",
                                                    "example": "weighted_scoring_v2"
                                                },
                                                "profile_signals": {
                                                    "type": "integer",
                                                    "example": 5
                                                },
                                                "candidates_scored": {
                                                    "type": "integer",
                                                    "example": 42
                                                },
                                                "diversity_injected": {
                                                    "type": "integer",
                                                    "example": 3
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/subscriptions/plans": {
            "get": {
                "tags": [
                    "üì¶ Abonnements Agences"
                ],
                "summary": "Lister les plans d'abonnement disponibles",
                "description": "Retourne la liste de tous les plans d'abonnement actifs, tri√©s par ordre de priorit√©. Chaque plan inclut les tarifs mensuels et annuels, les √©conomies r√©alis√©es sur un abonnement annuel, les limites d'annonces, le score de boost, et la liste des fonctionnalit√©s incluses. **Endpoint public** : aucune authentification requise.",
                "operationId": "listSubscriptionPlans",
                "responses": {
                    "200": {
                        "description": "Liste des plans d'abonnement actifs",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "9e2f3a4b-5c6d-7e8f-9a0b-1c2d3e4f5a6b"
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Premium"
                                                    },
                                                    "slug": {
                                                        "type": "string",
                                                        "example": "premium"
                                                    },
                                                    "description": {
                                                        "type": "string",
                                                        "example": "Plan premium pour les agences en croissance."
                                                    },
                                                    "price_monthly": {
                                                        "description": "Prix mensuel en FCFA",
                                                        "type": "integer",
                                                        "example": 35000
                                                    },
                                                    "price_yearly": {
                                                        "description": "Prix annuel en FCFA (null si indisponible)",
                                                        "type": "integer",
                                                        "example": 350000
                                                    },
                                                    "price_monthly_formatted": {
                                                        "type": "string",
                                                        "example": "35 000 FCFA"
                                                    },
                                                    "price_yearly_formatted": {
                                                        "type": "string",
                                                        "example": "350 000 FCFA"
                                                    },
                                                    "yearly_savings": {
                                                        "description": "√âconomie annuelle en FCFA par rapport au mensuel",
                                                        "type": "integer",
                                                        "example": 70000
                                                    },
                                                    "duration_days": {
                                                        "type": "integer",
                                                        "example": 30
                                                    },
                                                    "boost_score": {
                                                        "description": "Points de boost appliqu√©s aux annonces de l'agence",
                                                        "type": "integer",
                                                        "example": 25
                                                    },
                                                    "boost_duration_days": {
                                                        "description": "Dur√©e du boost en jours",
                                                        "type": "integer",
                                                        "example": 14
                                                    },
                                                    "max_ads": {
                                                        "description": "Nombre max d'annonces (null = illimit√©)",
                                                        "type": "integer",
                                                        "example": 50,
                                                        "nullable": true
                                                    },
                                                    "is_unlimited": {
                                                        "type": "boolean",
                                                        "example": false
                                                    },
                                                    "features": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string",
                                                            "example": "Boost de +25 points pendant 14 jours"
                                                        }
                                                    },
                                                    "sort_order": {
                                                        "type": "integer",
                                                        "example": 2
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/subscriptions/current": {
            "get": {
                "tags": [
                    "üì¶ Abonnements Agences"
                ],
                "summary": "Consulter l'abonnement actif de mon agence",
                "description": "Retourne l'abonnement actuellement actif de l'agence √† laquelle appartient l'utilisateur authentifi√©, avec les d√©tails du plan, le nombre de jours restants, et des statistiques (nombre d'annonces boost√©es, etc.). Si aucun abonnement n'est actif, `has_subscription` vaut `false` et `subscription` est `null`.",
                "operationId": "currentSubscription",
                "responses": {
                    "200": {
                        "description": "Abonnement actif trouv√© (ou aucun abonnement)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "has_subscription": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "subscription": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "plan": {
                                                    "description": "D√©tails du plan souscrit",
                                                    "type": "object"
                                                },
                                                "billing_period": {
                                                    "type": "string",
                                                    "enum": [
                                                        "monthly",
                                                        "yearly"
                                                    ],
                                                    "example": "monthly"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "pending",
                                                        "active",
                                                        "expired",
                                                        "cancelled"
                                                    ],
                                                    "example": "active"
                                                },
                                                "amount_paid": {
                                                    "type": "integer",
                                                    "example": 35000
                                                },
                                                "amount_paid_formatted": {
                                                    "type": "string",
                                                    "example": "35 000 FCFA"
                                                },
                                                "starts_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "ends_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "days_remaining": {
                                                    "type": "integer",
                                                    "example": 24
                                                },
                                                "is_active": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "auto_renew": {
                                                    "type": "boolean",
                                                    "example": false
                                                }
                                            },
                                            "type": "object",
                                            "nullable": true
                                        },
                                        "stats": {
                                            "properties": {
                                                "has_active_subscription": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "current_plan": {
                                                    "type": "string",
                                                    "example": "Premium"
                                                },
                                                "days_remaining": {
                                                    "type": "integer",
                                                    "example": 24
                                                },
                                                "expires_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "total_boosted_ads": {
                                                    "type": "integer",
                                                    "example": 12
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√© ‚Äî Token Sanctum manquant ou invalide"
                    },
                    "403": {
                        "description": "L'utilisateur n'appartient √† aucune agence",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Vous n'appartenez √† aucune agence."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/subscriptions/subscribe": {
            "post": {
                "tags": [
                    "üì¶ Abonnements Agences"
                ],
                "summary": "Souscrire √† un plan d'abonnement",
                "description": "Initie le processus de souscription √† un plan d'abonnement pour l'agence de l'utilisateur. Cr√©e une transaction de paiement FedaPay et retourne l'URL de paiement. Le frontend (mobile ou web) doit **rediriger l'utilisateur** vers `payment_url` pour finaliser le paiement. Une fois le paiement confirm√© par le webhook FedaPay, l'abonnement est activ√© automatiquement, les annonces de l'agence sont boost√©es, et une **facture est envoy√©e par email** √† tous les membres de l'agence.",
                "operationId": "subscribe",
                "requestBody": {
                    "description": "Donn√©es de souscription",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "plan_id",
                                    "billing_period"
                                ],
                                "properties": {
                                    "plan_id": {
                                        "description": "UUID du plan choisi (obtenu via GET /subscriptions/plans)",
                                        "type": "string",
                                        "format": "uuid",
                                        "example": "9e2f3a4b-5c6d-7e8f-9a0b-1c2d3e4f5a6b"
                                    },
                                    "billing_period": {
                                        "description": "P√©riode de facturation : mensuel ou annuel (annuel = ~2 mois offerts)",
                                        "type": "string",
                                        "enum": [
                                            "monthly",
                                            "yearly"
                                        ],
                                        "example": "monthly"
                                    },
                                    "callback_url": {
                                        "description": "URL de retour apr√®s paiement (optionnel, par d√©faut l'URL du frontend)",
                                        "type": "string",
                                        "example": "https://app.keyhome.cm/subscription/callback"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Paiement initialis√© ‚Äî Redirigez l'utilisateur vers payment_url",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "payment_url": {
                                            "description": "URL FedaPay vers laquelle rediriger l'utilisateur pour payer",
                                            "type": "string",
                                            "example": "https://checkout.fedapay.com/pay/abc123"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Redirigez l'utilisateur vers cette URL pour payer."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©"
                    },
                    "403": {
                        "description": "L'utilisateur n'appartient √† aucune agence",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Vous devez appartenir √† une agence pour souscrire."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Donn√©es invalides ou plan indisponible",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Ce plan n'est plus disponible."
                                        },
                                        "errors": {
                                            "description": "D√©tails des erreurs de validation (si applicable)",
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur technique FedaPay ou serveur"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/subscriptions/cancel": {
            "post": {
                "tags": [
                    "üì¶ Abonnements Agences"
                ],
                "summary": "Annuler l'abonnement actif de mon agence",
                "description": "Annule l'abonnement actif de l'agence. **L'abonnement reste fonctionnel jusqu'√† sa date d'expiration** (`ends_at`), mais ne sera pas renouvel√©. L'agence conserve donc l'acc√®s aux fonctionnalit√©s premium jusqu'√† la fin de la p√©riode pay√©e. Une raison d'annulation peut √™tre fournie (optionnel).",
                "operationId": "cancelSubscription",
                "requestBody": {
                    "description": "Raison de l'annulation (optionnel)",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "reason": {
                                        "description": "Raison de l'annulation",
                                        "type": "string",
                                        "example": "Nous n'avons plus besoin du service pour le moment."
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Abonnement annul√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Votre abonnement a √©t√© annul√©. Il reste actif jusqu'au 15/03/2026."
                                        },
                                        "subscription": {
                                            "description": "D√©tails de l'abonnement annul√©",
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©"
                    },
                    "403": {
                        "description": "L'utilisateur n'appartient √† aucune agence",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Vous n'appartenez √† aucune agence."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Aucun abonnement actif trouv√© pour cette agence",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Aucun abonnement actif √† annuler."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/subscriptions/history": {
            "get": {
                "tags": [
                    "üì¶ Abonnements Agences"
                ],
                "summary": "Historique des abonnements de mon agence",
                "description": "Retourne l'historique pagin√© de tous les abonnements (actifs, expir√©s, annul√©s) de l'agence √† laquelle appartient l'utilisateur. Chaque entr√©e inclut les d√©tails du plan, la p√©riode de facturation, le montant pay√© et les dates. Utile pour afficher un r√©capitulatif ou un historique de facturation dans l'application mobile ou web.",
                "operationId": "subscriptionHistory",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Num√©ro de page pour la pagination (15 √©l√©ments par page)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Historique pagin√© des abonnements",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "plan": {
                                                        "description": "D√©tails du plan souscrit",
                                                        "type": "object"
                                                    },
                                                    "billing_period": {
                                                        "type": "string",
                                                        "enum": [
                                                            "monthly",
                                                            "yearly"
                                                        ]
                                                    },
                                                    "status": {
                                                        "type": "string",
                                                        "enum": [
                                                            "pending",
                                                            "active",
                                                            "expired",
                                                            "cancelled"
                                                        ]
                                                    },
                                                    "amount_paid": {
                                                        "type": "integer",
                                                        "example": 35000
                                                    },
                                                    "amount_paid_formatted": {
                                                        "type": "string",
                                                        "example": "35 000 FCFA"
                                                    },
                                                    "starts_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "ends_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "days_remaining": {
                                                        "type": "integer"
                                                    },
                                                    "is_active": {
                                                        "type": "boolean"
                                                    },
                                                    "cancelled_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "nullable": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "links": {
                                            "description": "Liens de pagination",
                                            "properties": {
                                                "first": {
                                                    "type": "string"
                                                },
                                                "last": {
                                                    "type": "string"
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "description": "M√©tadonn√©es de pagination",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 3
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "total": {
                                                    "type": "integer",
                                                    "example": 42
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©"
                    },
                    "403": {
                        "description": "L'utilisateur n'appartient √† aucune agence",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Vous n'appartenez √† aucune agence."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/users": {
            "get": {
                "tags": [
                    "üë§ Utilisateur"
                ],
                "summary": "Liste des utilisateurs",
                "description": "R√©cup√®re la liste pagin√©e des utilisateurs avec leurs relations (ville et m√©dia)",
                "operationId": "getUsersList",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Num√©ro de page pour la pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'√©l√©ments par page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 10,
                            "maximum": 100,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des utilisateurs r√©cup√©r√©e avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/User"
                                            }
                                        },
                                        "links": {
                                            "properties": {
                                                "first": {
                                                    "type": "string",
                                                    "example": "http://example.com/api/v1/users?page=1"
                                                },
                                                "last": {
                                                    "type": "string",
                                                    "example": "http://example.com/api/v1/users?page=10"
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autoris√© - Token manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acc√®s interdit - Permissions insuffisantes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "This action is unauthorized"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne du serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur du serveur"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "üë§ Utilisateur"
                ],
                "summary": "Cr√©er un nouvel utilisateur",
                "description": "Cr√©e un nouvel utilisateur avec avatar et localisation GPS optionnels et g√©n√®re un token d'acc√®s",
                "operationId": "createUser",
                "requestBody": {
                    "description": "Donn√©es de l'utilisateur √† cr√©er",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "firstname",
                                    "lastname",
                                    "email",
                                    "password",
                                    "confirm_password",
                                    "phone_number",
                                    "role",
                                    "city_id"
                                ],
                                "properties": {
                                    "firstname": {
                                        "description": "Pr√©nom de l'utilisateur",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Jean"
                                    },
                                    "lastname": {
                                        "description": "Nom de famille de l'utilisateur",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Dupont"
                                    },
                                    "email": {
                                        "description": "Adresse email unique",
                                        "type": "string",
                                        "format": "email",
                                        "example": "jean.dupont@example.com"
                                    },
                                    "password": {
                                        "description": "Mot de passe (min. 8 caract√®res)",
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "motdepasse123"
                                    },
                                    "confirm_password": {
                                        "description": "Confirmation du mot de passe (doit correspondre au password)",
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "motdepasse123"
                                    },
                                    "phone_number": {
                                        "description": "Num√©ro de t√©l√©phone avec indicatif pays",
                                        "type": "string",
                                        "example": "+33123456789"
                                    },
                                    "role": {
                                        "description": "R√¥le de l'utilisateur dans le syst√®me",
                                        "type": "string",
                                        "enum": [
                                            "customer",
                                            "agent"
                                        ],
                                        "example": "agent"
                                    },
                                    "type": {
                                        "description": "Type d'agent (requis uniquement si role=agent)",
                                        "type": "string",
                                        "enum": [
                                            "individual",
                                            "agency"
                                        ],
                                        "example": "individual",
                                        "nullable": true
                                    },
                                    "city_id": {
                                        "description": "Identifiant de la ville de l'utilisateur",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "latitude": {
                                        "description": "Latitude GPS de la localisation de l'utilisateur (optionnel)",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 90,
                                        "minimum": -90,
                                        "example": 48.8566,
                                        "nullable": true
                                    },
                                    "longitude": {
                                        "description": "Longitude GPS de la localisation de l'utilisateur (optionnel)",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 180,
                                        "minimum": -180,
                                        "example": 2.3522,
                                        "nullable": true
                                    },
                                    "avatar": {
                                        "description": "Photo de profil de l'utilisateur (formats accept√©s: JPEG, PNG, GIF, WebP)",
                                        "type": "string",
                                        "format": "binary",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Utilisateur cr√©√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cr√©ation r√©ussie."
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        },
                                        "access_token": {
                                            "description": "Token d'authentification Bearer pour les futures requ√™tes",
                                            "type": "string",
                                            "example": "1|abcdef123456..."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Donn√©es de validation invalides",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "description": "D√©tails des erreurs de validation par champ",
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The email field is required."
                                                    }
                                                },
                                                "latitude": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The latitude must be between -90 and 90."
                                                    }
                                                },
                                                "confirm_password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The confirm password and password must match."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autoris√© - Token d'authentification manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acc√®s interdit - Permissions insuffisantes pour cr√©er un utilisateur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "This action is unauthorized"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflit - Email d√©j√† utilis√© par un autre compte",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette adresse email est d√©j√† utilis√©e."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation - Latitude et longitude doivent √™tre fournies ensemble",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "longitude": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The longitude field is required when latitude is present."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne du serveur - √âchec de cr√©ation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Impossible de cr√©er l'utilisateur pour le moment."
                                        },
                                        "error": {
                                            "description": "D√©tails de l'erreur (uniquement en mode debug)",
                                            "type": "string",
                                            "example": "Database connection failed",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/users/{id}": {
            "get": {
                "tags": [
                    "üë§ Utilisateur"
                ],
                "summary": "Afficher un utilisateur sp√©cifique",
                "description": "R√©cup√®re les d√©tails d'un utilisateur par son ID avec ses relations",
                "operationId": "getUserById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID unique de l'utilisateur",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64",
                            "minimum": 1,
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "D√©tails de l'utilisateur r√©cup√©r√©s avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autoris√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acc√®s interdit - Permissions insuffisantes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "This action is unauthorized"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Utilisateur non trouv√©"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne du serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur du serveur"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/users/{user}": {
            "put": {
                "tags": [
                    "üë§ Utilisateur"
                ],
                "summary": "Mettre √† jour un utilisateur",
                "description": "Met √† jour les informations d'un utilisateur existant avec gestion d'avatar",
                "operationId": "updateUser",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID de l'utilisateur √† mettre √† jour",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64",
                            "minimum": 1,
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "description": "Donn√©es de l'utilisateur √† mettre √† jour (tous les champs sont optionnels)",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "firstname": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "lastname": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8
                                    },
                                    "phone_number": {
                                        "type": "string"
                                    },
                                    "city_id": {
                                        "type": "integer"
                                    },
                                    "avatar": {
                                        "description": "Nouvel avatar de l'utilisateur (image)",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Utilisateur mis √† jour avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Utilisateur mis √† jour avec succ√®s."
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Donn√©es de validation invalides",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The email format is invalid."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autoris√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acc√®s interdit - Permissions insuffisantes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "This action is unauthorized"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\User]"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflit - Email d√©j√† utilis√© par un autre utilisateur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Cette adresse email est d√©j√† utilis√©e."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne du serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Impossible de mettre √† jour l'utilisateur pour le moment."
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Database connection failed"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "üë§ Utilisateur"
                ],
                "summary": "Supprimer un utilisateur",
                "description": "Supprime d√©finitivement un utilisateur et toutes ses donn√©es associ√©es (avatar, m√©dias)",
                "operationId": "deleteUser",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID de l'utilisateur √† supprimer",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64",
                            "minimum": 1,
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Utilisateur supprim√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Utilisateur supprim√© avec succ√®s."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autoris√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acc√®s interdit - Permissions insuffisantes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "This action is unauthorized"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\User]"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflit - Impossible de supprimer l'utilisateur (contraintes de donn√©es)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Impossible de supprimer cet utilisateur car il est li√© √† d'autres donn√©es."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne du serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Impossible de supprimer l'utilisateur pour le moment."
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Database constraint violation"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "Agency": {
                "title": "Agency",
                "description": "Agence immobili√®re",
                "properties": {
                    "id": {
                        "description": "ID unique de l'agence",
                        "type": "string",
                        "format": "uuid"
                    },
                    "name": {
                        "description": "Nom de l'agence",
                        "type": "string"
                    },
                    "slug": {
                        "description": "Slug de l'agence",
                        "type": "string"
                    },
                    "logo": {
                        "description": "URL du logo",
                        "type": "string",
                        "nullable": true
                    },
                    "owner_id": {
                        "description": "ID du propri√©taire",
                        "type": "string",
                        "format": "uuid"
                    },
                    "created_at": {
                        "description": "Date de cr√©ation",
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "description": "Date de mise √† jour",
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            },
            "AdCreateRequest": {
                "title": "Ad Create Request",
                "description": "Donn√©es requises pour cr√©er une annonce",
                "required": [
                    "title",
                    "description",
                    "adresse",
                    "price",
                    "surface_area",
                    "bedrooms",
                    "bathrooms",
                    "latitude",
                    "longitude",
                    "quarter_id",
                    "type_id"
                ],
                "properties": {
                    "title": {
                        "description": "Titre de l'annonce",
                        "type": "string",
                        "maxLength": 255,
                        "example": "Magnifique appartement"
                    },
                    "description": {
                        "description": "Description d√©taill√©e",
                        "type": "string",
                        "example": "Appartement spacieux avec vue"
                    },
                    "adresse": {
                        "description": "Adresse du bien",
                        "type": "string",
                        "maxLength": 500,
                        "example": "123 Rue de la Paix"
                    },
                    "price": {
                        "description": "Prix",
                        "type": "number",
                        "format": "float",
                        "minimum": 0,
                        "example": 1250.5
                    },
                    "surface_area": {
                        "description": "Surface en m¬≤",
                        "type": "number",
                        "format": "float",
                        "minimum": 0,
                        "example": 85.5
                    },
                    "bedrooms": {
                        "description": "Nombre de chambres",
                        "type": "integer",
                        "minimum": 0,
                        "example": 2
                    },
                    "bathrooms": {
                        "description": "Nombre de salles de bain",
                        "type": "integer",
                        "minimum": 0,
                        "example": 1
                    },
                    "has_parking": {
                        "description": "Parking disponible",
                        "type": "boolean",
                        "example": true
                    },
                    "latitude": {
                        "description": "Latitude GPS",
                        "type": "number",
                        "format": "float",
                        "maximum": 90,
                        "minimum": -90,
                        "example": 48.8566
                    },
                    "longitude": {
                        "description": "Longitude GPS",
                        "type": "number",
                        "format": "float",
                        "maximum": 180,
                        "minimum": -180,
                        "example": 2.3522
                    },
                    "status": {
                        "description": "Statut",
                        "type": "string",
                        "enum": [
                            "pending",
                            "active",
                            "expired",
                            "sold"
                        ],
                        "example": "pending"
                    },
                    "expires_at": {
                        "description": "Date d'expiration",
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-12-31T23:59:59Z",
                        "nullable": true
                    },
                    "user_id": {
                        "description": "ID utilisateur (optionnel)",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "quarter_id": {
                        "description": "ID quartier",
                        "type": "integer",
                        "example": 5
                    },
                    "type_id": {
                        "description": "ID type de bien",
                        "type": "integer",
                        "example": 2
                    },
                    "images": {
                        "description": "Images du bien (max 10, 5MB chaque)",
                        "type": "array",
                        "items": {
                            "type": "string",
                            "format": "binary"
                        },
                        "maxItems": 10
                    }
                },
                "type": "object"
            },
            "AdImage": {
                "title": "Ad Image",
                "description": "Image associ√©e √† une annonce",
                "properties": {
                    "id": {
                        "description": "Identifiant unique de l'image",
                        "type": "integer",
                        "example": 1
                    },
                    "ad_id": {
                        "description": "ID de l'annonce associ√©e",
                        "type": "integer",
                        "example": 1
                    },
                    "is_primary": {
                        "description": "Image principale",
                        "type": "boolean",
                        "example": true
                    },
                    "created_at": {
                        "description": "Date de cr√©ation",
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-15T10:30:00Z"
                    },
                    "updated_at": {
                        "description": "Date de modification",
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-15T10:30:00Z"
                    }
                },
                "type": "object"
            },
            "AdResource": {
                "title": "Ad Resource",
                "description": "Ressource compl√®te d'une annonce avec relations",
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/Ad"
                    },
                    {
                        "properties": {
                            "user": {
                                "description": "Propri√©taire de l'annonce",
                                "properties": {
                                    "id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "firstname": {
                                        "type": "string",
                                        "example": "John"
                                    },
                                    "lastname": {
                                        "type": "string",
                                        "example": "Doe"
                                    },
                                    "email": {
                                        "type": "string",
                                        "example": "john.doe@example.com"
                                    },
                                    "phone_number": {
                                        "type": "string",
                                        "example": "+33123456789"
                                    },
                                    "avatar": {
                                        "type": "string",
                                        "example": "https://example.com/avatar.jpg",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            },
                            "quarter": {
                                "description": "Quartier du bien",
                                "properties": {
                                    "id": {
                                        "type": "integer",
                                        "example": 5
                                    },
                                    "name": {
                                        "type": "string",
                                        "example": "Centre-ville"
                                    },
                                    "city": {
                                        "description": "Ville du quartier",
                                        "properties": {
                                            "id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "name": {
                                                "type": "string",
                                                "example": "Paris"
                                            },
                                            "postal_code": {
                                                "type": "string",
                                                "example": "75001"
                                            }
                                        },
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            },
                            "ad_type": {
                                "description": "Type de bien",
                                "properties": {
                                    "id": {
                                        "type": "integer",
                                        "example": 2
                                    },
                                    "name": {
                                        "type": "string",
                                        "example": "Appartement"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Logement dans un immeuble"
                                    }
                                },
                                "type": "object"
                            },
                            "images": {
                                "description": "Images de l'annonce",
                                "type": "array",
                                "items": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "is_primary": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "media": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Image principale"
                                                    },
                                                    "file_name": {
                                                        "type": "string",
                                                        "example": "1_1642234567_0.jpg"
                                                    },
                                                    "mime_type": {
                                                        "type": "string",
                                                        "example": "image/jpeg"
                                                    },
                                                    "size": {
                                                        "type": "integer",
                                                        "example": 1024576
                                                    },
                                                    "url": {
                                                        "type": "string",
                                                        "example": "https://example.com/storage/images/1_1642234567_0.jpg"
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2024-01-15T10:30:00Z"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "images_count": {
                                "description": "Nombre total d'images",
                                "type": "integer",
                                "example": 4
                            }
                        },
                        "type": "object"
                    }
                ]
            },
            "Ad": {
                "title": "Ad",
                "description": "Mod√®le Annonce immobili√®re",
                "properties": {
                    "id": {
                        "description": "Identifiant unique de l'annonce",
                        "type": "integer",
                        "example": 1
                    },
                    "title": {
                        "description": "Titre de l'annonce",
                        "type": "string",
                        "maxLength": 255,
                        "example": "Magnifique appartement au centre-ville"
                    },
                    "description": {
                        "description": "Description d√©taill√©e de l'annonce",
                        "type": "string",
                        "example": "Superbe appartement de 3 pi√®ces avec vue imprenable sur la ville"
                    },
                    "adresse": {
                        "description": "Adresse du bien",
                        "type": "string",
                        "maxLength": 500,
                        "example": "123 Rue de la Paix, 75001 Paris"
                    },
                    "price": {
                        "description": "Prix du bien",
                        "type": "number",
                        "format": "float",
                        "minimum": 0,
                        "example": 1250.5
                    },
                    "surface_area": {
                        "description": "Surface en m¬≤",
                        "type": "number",
                        "format": "float",
                        "minimum": 0,
                        "example": 85.5
                    },
                    "bedrooms": {
                        "description": "Nombre de chambres",
                        "type": "integer",
                        "minimum": 0,
                        "example": 2
                    },
                    "bathrooms": {
                        "description": "Nombre de salles de bain",
                        "type": "integer",
                        "minimum": 0,
                        "example": 1
                    },
                    "has_parking": {
                        "description": "Disponibilit√© d'un parking",
                        "type": "boolean",
                        "example": true
                    },
                    "latitude": {
                        "description": "Latitude GPS",
                        "type": "number",
                        "format": "float",
                        "maximum": 90,
                        "minimum": -90,
                        "example": 48.8566
                    },
                    "longitude": {
                        "description": "Longitude GPS",
                        "type": "number",
                        "format": "float",
                        "maximum": 180,
                        "minimum": -180,
                        "example": 2.3522
                    },
                    "status": {
                        "description": "Statut de l'annonce",
                        "type": "string",
                        "enum": [
                            "pending",
                            "active",
                            "expired",
                            "sold"
                        ],
                        "example": "active"
                    },
                    "expires_at": {
                        "description": "Date d'expiration",
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-12-31T23:59:59Z",
                        "nullable": true
                    },
                    "created_at": {
                        "description": "Date de cr√©ation",
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-15T10:30:00Z"
                    },
                    "updated_at": {
                        "description": "Date de derni√®re modification",
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-16T14:20:00Z"
                    },
                    "user_id": {
                        "description": "ID du propri√©taire de l'annonce",
                        "type": "integer",
                        "example": 1
                    },
                    "quarter_id": {
                        "description": "ID du quartier",
                        "type": "integer",
                        "example": 5
                    },
                    "type_id": {
                        "description": "ID du type de bien",
                        "type": "integer",
                        "example": 2
                    }
                },
                "type": "object"
            },
            "AdType": {
                "title": "AdType",
                "description": "Mod√®le pour type d'annonce",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "desc": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "AdUpdateRequest": {
                "title": "Ad Update Request",
                "description": "Donn√©es pour mettre √† jour une annonce",
                "properties": {
                    "title": {
                        "description": "Titre de l'annonce",
                        "type": "string",
                        "maxLength": 255,
                        "example": "Titre mis √† jour"
                    },
                    "description": {
                        "description": "Description mise √† jour",
                        "type": "string",
                        "example": "Description modifi√©e"
                    },
                    "adresse": {
                        "description": "Nouvelle adresse",
                        "type": "string",
                        "maxLength": 500,
                        "example": "456 Avenue Updated"
                    },
                    "price": {
                        "description": "Nouveau prix",
                        "type": "number",
                        "format": "float",
                        "minimum": 0,
                        "example": 1350.75
                    },
                    "surface_area": {
                        "description": "Nouvelle surface",
                        "type": "number",
                        "format": "float",
                        "minimum": 0,
                        "example": 90
                    },
                    "bedrooms": {
                        "description": "Nouveau nombre de chambres",
                        "type": "integer",
                        "minimum": 0,
                        "example": 3
                    },
                    "bathrooms": {
                        "description": "Nouveau nombre de salles de bain",
                        "type": "integer",
                        "minimum": 0,
                        "example": 2
                    },
                    "has_parking": {
                        "description": "Parking disponible",
                        "type": "boolean",
                        "example": false
                    },
                    "latitude": {
                        "description": "Nouvelle latitude",
                        "type": "number",
                        "format": "float",
                        "maximum": 90,
                        "minimum": -90,
                        "example": 48.8606
                    },
                    "longitude": {
                        "description": "Nouvelle longitude",
                        "type": "number",
                        "format": "float",
                        "maximum": 180,
                        "minimum": -180,
                        "example": 2.3376
                    },
                    "status": {
                        "description": "Nouveau statut",
                        "type": "string",
                        "enum": [
                            "pending",
                            "active",
                            "expired",
                            "sold"
                        ],
                        "example": "active"
                    },
                    "expires_at": {
                        "description": "Nouvelle date d'expiration",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-01-31T23:59:59Z"
                    },
                    "quarter_id": {
                        "description": "Nouveau quartier",
                        "type": "integer",
                        "example": 3
                    },
                    "type_id": {
                        "description": "Nouveau type",
                        "type": "integer",
                        "example": 1
                    },
                    "images": {
                        "description": "Nouvelles images √† ajouter",
                        "type": "array",
                        "items": {
                            "type": "string",
                            "format": "binary"
                        }
                    },
                    "images_to_delete": {
                        "description": "IDs des images √† supprimer",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            3,
                            5
                        ]
                    }
                },
                "type": "object"
            },
            "City": {
                "title": "City",
                "description": "Mod√®le pour une ville",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "ErrorResponse": {
                "title": "Error Response",
                "description": "R√©ponse d'erreur standard",
                "properties": {
                    "success": {
                        "type": "boolean",
                        "example": false
                    },
                    "message": {
                        "type": "string",
                        "example": "Une erreur s'est produite"
                    },
                    "error": {
                        "type": "string",
                        "example": "D√©tail de l'erreur",
                        "nullable": true
                    },
                    "errors": {
                        "description": "Erreurs de validation",
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "type": "object"
            },
            "Quarter": {
                "title": "Quarter",
                "description": "Mod√®le quartier",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "city_id": {
                        "type": "integer"
                    }
                },
                "type": "object"
            },
            "User": {
                "title": "User",
                "description": "Mod√®le utilisateur",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "firstname": {
                        "type": "string"
                    },
                    "lastname": {
                        "type": "string"
                    },
                    "phone_number": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "password": {
                        "type": "string"
                    },
                    "confirm_password": {
                        "type": "string"
                    },
                    "avatar": {
                        "type": "string"
                    },
                    "role": {
                        "type": "string",
                        "enum": [
                            "admin",
                            "agent",
                            "customer"
                        ]
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "individual",
                            "agency"
                        ],
                        "nullable": true
                    },
                    "city_id": {
                        "type": "integer"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "name": "Authorization",
                "in": "header",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "üè∑Ô∏è Type d'annonce",
            "description": "Gestion des types d'annonces"
        },
        {
            "name": "üèôÔ∏è Ville",
            "description": "Gestion des villes"
        },
        {
            "name": "üîê Authentification",
            "description": "Gestion de l'authentification"
        },
        {
            "name": "üë§ Utilisateur",
            "description": "Gestion des utilisateurs"
        },
        {
            "name": "üìç Quartier",
            "description": "Gestion des quartiers"
        },
        {
            "name": "üè† Annonces",
            "description": "Gestion des annonces"
        },
        {
            "name": "üîç Filtre",
            "description": "Filtrer les annonces"
        },
        {
            "name": "üí∞ Paiements",
            "description": "Gestion des paiements"
        },
        {
            "name": "‚≠ê Recommandations",
            "description": "Gestion des recommandations"
        },
        {
            "name": "üì¶ Abonnements Agences",
            "description": "Gestion des abonnements pour les agences immobili√®res. Permet de consulter les plans disponibles, souscrire via FedaPay, consulter l'abonnement actif, l'annuler et voir l'historique. Les agences re√ßoivent une facture par email √† chaque souscription."
        },
        {
            "name": "üìä Analytics",
            "description": "üìä Analytics"
        },
        {
            "name": "üìä Interactions",
            "description": "üìä Interactions"
        },
        {
            "name": "üè¢ Agence",
            "description": "üè¢ Agence"
        }
    ]
}